<!doctype html>
<html ng-app="PlayAngular">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width">

    <title>Angular-Wakanda - Bootstrap</title>

    <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="./styles.css">
  </head>

  <body ng-controller="PlayController">

    <header class="container-fluid page-header">
      <h1>Angular-Wakanda</h1>
    </header>

    <div id="main" class="row container-fluid page-body">

      <div class="col-md-3 col-sm-6 col-xs-12">
        <section class="panel panel-default">
          <div  class="panel-heading">
            <h2>Countries</h2>
          </div>
          <div  class="panel-body">
            <p>All <span class="badge">{{countries.$totalCount}}</span></p>
            <div class="input-group">
              <span class="input-group-btn"><button class="btn btn-default" type="button" disabled>Filter</button></span>
              <!--input type="text" class="form-control" ng-model="allCountries._filter" ng-change="setFilter('countries', allCountries, 'name')"-->
              <input type="text" class="form-control" ng-model="countries._filter" ng-change="setFilter('countries', 'Country', 'name')">
            </div>
          </div>
          <table class="table table-striped table-hover">
            <tbody>
              <tr ng-repeat="c in countries" class="{{(c === country) && 'info'}}">
                <td ng-click="setCurrent('country', c)">{{c.name}}</td>
              </tr>
            <tbody>
          </table>
        </section>
      </div>

      <div class="col-md-3 col-sm-6 col-xs-12">
        <section class="panel panel-default">
          <div  class="panel-heading">
            <h2>Companies</h2>
          </div>
          <div class="panel-body">
            <p>From <strong>{{country.name}}</strong> <span class="badge">{{country.companies.$totalCount}}</span></p>
            <div class="input-group">
              <span class="input-group-btn"><button class="btn btn-default" type="button" disabled>Filter</button></span>
              <!-- input type="text" class="form-control" ng-model="country.companies._filter" ng-change="setFilter('companies', country.companies, 'name')" -->
              <input type="text" class="form-control" ng-model="companies._filter" ng-change="setFilter('companies', 'Company', 'name', 'country', country.ID)">
            </div>
          </div>
          <div>
            <table class="table table-striped table-hover">
              <tbody when-scrolled="companies.$more()">
                <tr ng-repeat="c in companies" class="{{c === company && 'info'}}">
                  <td ng-click="setCurrent('company', c)">{{c.name}}</td>
                </tr>
              <tbody>
            </table>
          </div>
        </section>
      </div>

      <div class="col-md-3 col-sm-6 col-xs-12">
        <section class="panel panel-default">
          <div  class="panel-heading">
            <h2>Employees</h2>
          </div>
          <div  class="panel-body">
            <p>From <strong>{{company.name}}</strong> <span class="badge">{{company.employees.$totalCount}}</span></p>
            <div class="input-group">
              <span class="input-group-btn"><button class="btn btn-default" type="button" disabled>Filter</button></span>
              <!-- input type="text" class="form-control" ng-model="company.employees._filter" ng-change="setFilter('employees', company.employees, 'fullName')" -->
              <input type="text" class="form-control" ng-model="employees._filter" ng-change="setFilter('employees', 'Employee', 'fullName', 'company', company.ID)">
            </div>
          </div>
          <div>
            <table class="table table-striped table-hover">
              <tbody when-scrolled="employees.$more()">
                <tr ng-repeat="e in employees" class="{{e === employee && 'info'}}">
                  <td ng-click="setCurrent('employee', e)">{{e.fullName}}</td>
                </tr>
              <tbody>
            </table>
          </div>
        </section>
      </div>

      <div class="col-md-3 col-sm-6 col-xs-12">
        <section class="panel panel-default">
          <div  class="panel-heading">
            <h2>Employee Details</h2>
          </div>
          <div  class="panel-body" ng-show="employee">
            <p><strong>{{employee.fullName}}</strong></p>
            <p><img ng-src="{{employee.photo.src}}" class="img-thumbnail"></p>
            <p><strong>Title</strong>: {{employee.title}}</p>
            <p><strong>Salary</strong>: {{employee.salary}}</p>
            <p><strong>Gender</strong>: {{employee.gender}}</p>
            <p><strong>Age</strong>: {{employee.age}}</p>
          </div>
        </section>
      </div>

    </div><!--main-->

    <script src="/bower_components/jquery/dist/jquery.min.js"></script>
    <script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

    <script src="/bower_components/angular/angular.min.js"></script>
    <script src="/bower_components/angular-wakanda/angular-wakanda.min.js"></script>
    <script src="./app.js"></script>
  </body>
</html>
